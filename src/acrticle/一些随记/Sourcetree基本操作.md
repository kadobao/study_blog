---
title: Sourcetree基本操作
icon: 
order: 24
category:
  - 一些随记
tag:
  - SourceTree
---


# Sourcetree基本操作

## 回到某个历史提交

### 操作步骤

1. 在Sourcetree中找到你想要回到的历史提交记录
2. 右键点击该提交记录
3. 在弹出的菜单中选择`检出`选项

### 操作示意图

![Sourcetree基本操作_回到历史某个提交](/assets/images/Sourcetree基本操作_回到历史某个提交.png)

## 将其他分支某个历史记录的修改同步到本分支

### 操作步骤

1. 先切换到本分支
2. 右键点击其他分支的某个历史提交记录
3. 点击遴选

### 场景演绎

#### 场景描述

现在`dev`分支有一个紧急的 Bug需要修复：

- 修复了 Bug，并完成了一次提交（假设这个提交的SHA是 a1b2c3d）
- 需要把刚才的那个修复应用到`master`分支上
- 但不想直接把整个`dev`分支合并到`master`，因为`dev`上可能还有其他暂时不想要的内容

#### 解决方案

这时，**遴选 (Cherry-Pick)** 就是最完美的解决方案。

#### 操作步骤

1. 在 Sourcetree 中，确认你当前已经切换到了`master`分支
2. 在提交历史图中，找到你在`dev`分支上进行的那个修复提交（SHA 为 a1b2c3d的提交）
3. 在该提交上点击右键，选择 **"遴选 (Cherry-Pick)"**

#### 冲突处理

如果那个修复所修改的文件，在 `master`分支上也发生了改动，Git 无法自动合并，就会产生**冲突**：

- Sourcetree 会提示你冲突
- 直接在VSCode里面打开文件，这时也会提示你有冲突，但是会显示一个按钮`打开合并编辑器`
- 点击`打开合并编辑器`处理冲突

### 注意事项

> 这样其他分支的修改就会同步到本分支。需要注意的是，这是把那个记录提交的修改同步，而不是全部文件合并。

## 重置 (Reset) 到上一个提交

可以去除历史记录和将代码还原到未提交之前

### 操作步骤

1. 在 Sourcetree 的提交历史图中，找到你**不想要的这个提交的前一个提交**（也就是你想回退到的那个版本）
2. 在该提交上右键
3. 选择 **"重置当前分支到此次提交..."**
4. 在弹出的对话框中，**选择"硬重置 (Hard) - 丢弃所有改动"**
5. 点击"确定"

### 重置类型说明

- **软合并**：一个保留了git add（代码保留）
- **混合合并**：一个丢弃了之前执行的git add（代码保留）
- **强行合并**：丢弃所有改动过的代码

## 回滚提交 (Revert)

它不会删除历史，而是创建一个**新的提交**，这个新提交的内容专门用于**撤销你所选提交的所有变更**。你的文件修改会保留，但会变成"未暂存"的状态。（丢弃了之前执行的git add）

### 操作步骤

1. 在提交历史图中，选中你**不想要的那个最新提交**
2. 右键点击它
3. 选择 **"回滚提交..."**
4. 点击确认

## 合并与变基的区别

### 合并操作

先切换到本分支

`git merge`默认会合并另一个分支的所有新提交（从两个分支的共同祖先开始算起），无法自由选择只合并其中的某几个提交。

#### 情景演示

**情况一**：你当前在 master分支，右键点击了 dev分支上的一个提交

- 当前分支： master(目的地)
- 选中提交： dev分支上的某个点 (来源)
- 操作结果： 执行"合并"后，Git 会将 dev分支从与 master分叉的点开始，直到你选中的那个提交为止的所有更改，全部合并到 master分支作为master的最新提交。

### 变基操作

变基是将当前分支的基底移动到另一个分支的最新提交上，使得提交历史更加线性（这个就是区别）。

#### 操作步骤

1. 切换到需要变基的`dev`分支
2. 右键点击目标`master`分支
3. 选择"变基到此分支"


#### 注意事项

- 变基会改写提交历史，慎用在已推送的分支上
- 如有冲突，需要逐一解决