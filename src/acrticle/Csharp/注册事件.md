---
title: 注册事件
icon: code
order: 20
category:
  - C#学习
tag:
  - 注册事件
  - 委托
---


## 事件（Event）与委托（Delegate）的区别

### 核心区别

事件是对委托的封装，只允许 `+=` 和 `-=` 操作，禁止直接赋值（`=`）和调用（`Invoke`）。

### 事件比委托多了一层封装

#### 委托的本质

委托（Delegate）是一个**方法指针列表**，可以存储多个方法。
外部代码可以**直接修改**这个列表（赋值、调用、清空）。

#### 事件的本质

事件（Event）在**委托的基础上**增加了一层**访问控制**：
- **外部只能 `+=` 订阅和 `-=` 取消订阅**，不能直接修改委托。
- **只能在声明事件的类内部触发**（如 `OnClick()` 方法）。

### 事件示例

```csharp
public class Button
{
    // 1. 声明事件
    public event EventHandler Click;
    
    // 触发事件的方法
    public void OnClick()
    {
        Click?.Invoke(this, EventArgs.Empty);
    }
}

public class Program
{
    public static void Main()
    {
        Button btn = new Button();
        
        // 2. 注册事件处理程序
        btn.Click += Button_Click;
        
        // 触发事件
        btn.OnClick();
    }
    
    // 3. 事件处理方法
    private static void Button_Click(object sender, EventArgs e)
    {
        Console.WriteLine("按钮被点击了！");
    }
}
```