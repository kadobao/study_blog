---
title: 样式的属性触发器和数据触发器
icon: code
order: 15
category:
  - C#学习
tag:
  - WPF
  - 样式触发器
---

# WPF 样式的属性触发器和数据触发器

在 WPF 中，样式触发器用于根据特定条件动态更改控件的外观。WPF 提供了五种不同类型的样式触发器：

## 1. Trigger（属性触发器）

属性触发器基于控件的属性值来应用样式更改。

**使用场景：** 在样式文件中使用较多。

```xml
<!-- 覆盖掉原本的鼠标悬浮效果 -->
<Trigger Property="IsMouseOver" Value="True">
    <Setter Property="RenderTransform">
        <Setter.Value>
            <TransformGroup>
                <ScaleTransform ScaleX="1" ScaleY="1"/>
            </TransformGroup>
        </Setter.Value>
    </Setter>
    <Setter Property="Background" Value="{DynamicResource PrimaryWhiteColor}"/>
    <Setter Property="BorderThickness" Value="3"/>
    <!-- 颜色#FFD700为金色 -->
    <Setter Property="BorderBrush" Value="#FFD700"/>
</Trigger>
```

## 2. DataTrigger（数据触发器）

数据触发器基于数据绑定的值来应用样式更改，通常绑定到 ViewModel 的属性。

**使用场景：** 在样式文件中使用较多。

```xml
<!-- 对话框打开后的视觉效果 -->
<DataTrigger Binding="{Binding IsDialogOpened, UpdateSourceTrigger=PropertyChanged}" Value="True">
    <Setter Property="Background" Value="{DynamicResource PrimaryWhiteColor}"/>
    <Setter Property="BorderThickness" Value="3"/>
    <!-- 颜色#FFD700为金色 -->
    <Setter Property="BorderBrush" Value="#FFD700"/>
</DataTrigger>
```

## 3. EventTrigger（事件触发器）

事件触发器响应控件的事件，通常用于触发动画或命令。

**使用场景：** 在 View 中使用较多。
**限制：** 只能用于动画或命令，不能直接修改样式属性。

## 4. MultiTrigger（多条件触发器）

多条件触发器基于多个属性条件的组合来应用样式更改。

## 5. MultiDataTrigger（多条件数据触发器）

多条件数据触发器基于多个数据绑定条件的组合来应用样式更改。





## 6. 样式示例

::: details 样式示例

```xaml
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <!-- 添加渐变卡片样式 -->
    <Style x:Key="TimeCardStyle" TargetType="Border">
        <Setter Property="CornerRadius" Value="15"/>
        <Setter Property="Margin" Value="5"/>
        <Setter Property="Padding" Value="15"/>
        <Setter Property="Effect">
            <Setter.Value>
                <DropShadowEffect BlurRadius="10" ShadowDepth="3" Color="#12C092" Opacity="0.5"/>
            </Setter.Value>
        </Setter>
        <Setter Property="Background">
            <Setter.Value>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                    <GradientStop Offset="0" Color="#12C092"/>
                    <GradientStop Offset="1" Color="#3A6AA9"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- 悬浮效果卡片样式，基于TimeCardStyle -->
    <Style x:Key="FloatCardStyle" TargetType="Border" BasedOn="{StaticResource TimeCardStyle}">
        <!-- 设置 RenderTransformOrigin 为卡片中心点 -->
        <Setter Property="RenderTransformOrigin" Value="0.5,0.5"/>
        <!-- 初始的 RenderTransform 设置 -->
        <Setter Property="RenderTransform">
            <Setter.Value>
                <ScaleTransform ScaleX="1.0" ScaleY="1.0"/>
            </Setter.Value>
        </Setter>
        
        <Style.Triggers>
            <!-- 鼠标悬浮效果 -->
            <Trigger Property="IsMouseOver" Value="True">
                <!-- 放大1.2倍并向上移动10像素 -->
                <Setter Property="RenderTransform">
                    <Setter.Value>
                        <TransformGroup>
                            <ScaleTransform ScaleX="1.05" ScaleY="1.05"/>
                            <TranslateTransform Y="-10"/>
                        </TransformGroup>
                    </Setter.Value>
                </Setter>
                <!-- 颜色变深效果 -->
                <Setter Property="Background">
                    <Setter.Value>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                            <GradientStop Offset="0" Color="{StaticResource TertiaryWhiteColorValue}"/>
                            <GradientStop Offset="1" Color="{StaticResource TertiaryWhiteColorValue}"/>
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
            </Trigger>
        </Style.Triggers>
    </Style>

    <!-- 拖放效果卡片样式，基于FloatCardStyle -->
    <Style x:Key="DragDropCardStyle" TargetType="Border" BasedOn="{StaticResource FloatCardStyle}">
        <Setter Property="Background" Value="{DynamicResource TertiaryBlueColor}"/>
        <Style.Triggers>
            <!-- 拖放进入时的视觉效果 -->
            <DataTrigger Binding="{Binding IsDragOver, UpdateSourceTrigger=PropertyChanged}" Value="True">
                <Setter Property="BorderThickness" Value="3"/>
                <!-- 颜色#FFD700为金色 -->
                <Setter Property="BorderBrush" Value="#FFD700"/>
                <Setter Property="Background" Value="{DynamicResource PrimaryWhiteColor}"/>
            </DataTrigger>

            <!-- 覆盖掉原本的鼠标悬浮效果 -->
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="RenderTransform">
                    <Setter.Value>
                        <TransformGroup>
                            <ScaleTransform ScaleX="1" ScaleY="1"/>
                        </TransformGroup>
                    </Setter.Value>
                </Setter>
                <Setter Property="Background" Value="{DynamicResource PrimaryWhiteColor}"/>
                <Setter Property="BorderThickness" Value="3"/>
                <!-- 颜色#FFD700为金色 -->
                <Setter Property="BorderBrush" Value="#FFD700"/>
            </Trigger>

            <!-- 对话框打开后的视觉效果 -->
            <DataTrigger Binding="{Binding IsDialogOpened, UpdateSourceTrigger=PropertyChanged}" Value="True">
                <Setter Property="Background" Value="{DynamicResource PrimaryWhiteColor}"/>
                <Setter Property="BorderThickness" Value="3"/>
                <!-- 颜色#FFD700为金色 -->
                <Setter Property="BorderBrush" Value="#FFD700"/>
            </DataTrigger>

            <!-- 使用EventTrigger来触发动画效果，但确保在对话框关闭后执行 -->
            <!-- <EventTrigger RoutedEvent="MouseLeftButtonUp">
                <BeginStoryboard>
                    <Storyboard>
                        <ColorAnimation Storyboard.TargetProperty="(Panel.Background).(SolidColorBrush.Color)"
                                    To="White"
                                    Duration="0:0:0.2"/>
                        <ThicknessAnimation Storyboard.TargetProperty="BorderThickness"
                                        To="3"
                                        Duration="0:0:0.1"/>
                        <ColorAnimation Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)"
                                    To="#FFD700"
                                    Duration="0:0:0.1"/>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger> -->


        </Style.Triggers>
    </Style>
</ResourceDictionary>
```

:::